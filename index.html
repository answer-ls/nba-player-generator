<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NBAçƒå‘˜ç”Ÿæˆå™¨</title>
    <style>
        /* æ ·å¼ä»£ç ä¿æŒä¸å˜ï¼Œè¿™é‡Œçœç•¥ä»¥èŠ‚çœç©ºé—´ */
        /* è¯·ä½¿ç”¨æ‚¨ä¹‹å‰æä¾›çš„å®Œæ•´CSSæ ·å¼ */
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ€ NBAçƒå‘˜ç”Ÿæˆå™¨</h1>
            <p class="subtitle">éšæœºç”ŸæˆNBAçƒå‘˜å¯¹å†³ã€å®Œæ•´çƒé˜Ÿæˆ–å•çƒå‘˜ï¼Œä½“éªŒä¸ä¸€æ ·çš„ç¯®çƒä¹è¶£ï¼</p>
        </header>
        
        <!-- æ§åˆ¶é¢æ¿ä¿æŒä¸å˜ -->
        <div class="controls">
            <div class="mode-selector">
                <button class="mode-btn active" data-mode="matchup">çƒå‘˜å¯¹å†³</button>
                <button class="mode-btn" data-mode="teams">å®Œæ•´çƒé˜Ÿ</button>
                <button class="mode-btn" data-mode="single">å•çƒå‘˜æŠ½å–</button>
            </div>
            
            <div class="player-type">
                <label>
                    <input type="radio" name="playerType" value="active" checked>
                    <span>ç°å½¹çƒå‘˜</span>
                </label>
                <label>
                    <input type="radio" name="playerType" value="classic">
                    <span>ä¼ å¥‡çƒå‘˜</span>
                </label>
            </div>
            
            <div class="team-mode">
                <label>
                    <input type="radio" name="teamMode" value="auto" checked>
                    <span>è‡ªåŠ¨åˆ†é˜Ÿ</span>
                </label>
                <label>
                    <input type="radio" name="teamMode" value="manual">
                    <span>ç©å®¶åˆ†é˜Ÿ</span>
                </label>
            </div>
            
            <div id="playerInputs" class="player-inputs">
                <h3>è¯·è¾“å…¥4åç©å®¶åç§°</h3>
                <div class="input-group">
                    <input type="text" id="player1" placeholder="ç©å®¶1">
                    <input type="text" id="player2" placeholder="ç©å®¶2">
                </div>
                <div class="input-group">
                    <input type="text" id="player3" placeholder="ç©å®¶3">
                    <input type="text" id="player4" placeholder="ç©å®¶4">
                </div>
                <div class="player-management">
                    <button class="save-btn" id="savePlayers">ä¿å­˜ç©å®¶</button>
                    <button class="clear-btn" id="clearPlayers">æ¸…ç©ºç©å®¶</button>
                    <button id="loadPlayers">åŠ è½½ç©å®¶</button>
                </div>
            </div>
            
            <button id="generateBtn" class="generate-btn">ç”Ÿæˆå¯¹å†³</button>
        </div>
        
        <!-- ç»“æœå®¹å™¨ä¿æŒä¸å˜ -->
        <div id="resultContainer" class="result-container">
            <div id="loading" class="loading">
                <div class="spinner"></div>
                æ­£åœ¨ç”Ÿæˆä¸­ï¼Œè¯·ç¨å€™...
            </div>
            
            <div id="matchupResult" class="matchup-result">
                <h2 class="matchup-title">ğŸ† çƒå‘˜å¯¹å†³</h2>
                <div class="matchup-content">
                    <div class="team">
                        <div class="team-name" id="team1Name">é˜Ÿä¼ä¸€</div>
                        <div id="team1Players"></div>
                    </div>
                    <div class="vs">VS</div>
                    <div class="team">
                        <div class="team-name" id="team2Name">é˜Ÿä¼äºŒ</div>
                        <div id="team2Players"></div>
                    </div>
                </div>
            </div>
            
            <div id="teamsResult" class="teams-result">
                <h2 class="teams-title">ğŸ€ å®Œæ•´çƒé˜Ÿ</h2>
                <div class="teams-content">
                    <div class="team-simple">
                        <div class="team-simple-name" id="teamA">é˜Ÿä¼A</div>
                        <div class="team-simple-subtitle" id="teamASubtitle">éšæœºç”Ÿæˆçƒé˜Ÿ</div>
                        <div class="team-players" id="teamAPlayers"></div>
                    </div>
                    <div class="team-simple">
                        <div class="team-simple-name" id="teamB">é˜Ÿä¼B</div>
                        <div class="team-simple-subtitle" id="teamBSubtitle">éšæœºç”Ÿæˆçƒé˜Ÿ</div>
                        <div class="team-players" id="teamBPlayers"></div>
                    </div>
                </div>
            </div>
            
            <div id="singlePlayerResult" class="single-player-result">
                <h2 class="single-player-title">ğŸŒŸ å•çƒå‘˜æŠ½å–</h2>
                <div class="single-player-content">
                    <div class="single-player-card">
                        <div class="single-player-name" id="singlePlayerName">çƒå‘˜å§“å</div>
                        <div class="single-player-details" id="singlePlayerDetails">çƒå‘˜è¯¦æƒ…</div>
                        <div class="single-player-team" id="singlePlayerTeam">çƒé˜Ÿåç§°</div>
                        <div class="single-player-position" id="singlePlayerPosition">ä½ç½®</div>
                    </div>
                    <p>æ­å–œä½ æŠ½åˆ°äº†è¿™ä½çƒå‘˜ï¼</p>
                </div>
            </div>
            
            <button class="share-btn" onclick="shareResult()">åˆ†äº«ç»“æœ</button>
        </div>
        
        <footer>
            <p>Â© 2025 NBAçƒå‘˜ç”Ÿæˆå™¨ | æ•°æ®ä»…ä¾›å‚è€ƒï¼Œéå®˜æ–¹æ•°æ®</p>
        </footer>
    </div>

    <script>
        // NBAçƒå‘˜æ•°æ® - å®Œæ•´ç‰ˆæœ¬
        const nbaData = {
            active: [
                // ç‹¬è¡Œä¾ çƒå‘˜ - é‡ç‚¹æ·»åŠ 
                { name: "Luka Doncic", chinese: "å¢å¡Â·ä¸œå¥‘å¥‡", team: "ç‹¬è¡Œä¾ ", position: "PG" },
                { name: "Kyrie Irving", chinese: "å‡¯é‡ŒÂ·æ¬§æ–‡", team: "ç‹¬è¡Œä¾ ", position: "PG" },
                { name: "Tim Hardaway Jr.", chinese: "å°è’‚å§†Â·å“ˆè¾¾å¨", team: "ç‹¬è¡Œä¾ ", position: "SG" },
                { name: "Josh Green", chinese: "ä¹”ä»€Â·æ ¼æ—", team: "ç‹¬è¡Œä¾ ", position: "SG" },
                { name: "Maxi Kleber", chinese: "é©¬å…‹è¥¿Â·å…‹å‹’è´å°”", team: "ç‹¬è¡Œä¾ ", position: "PF" },
                { name: "Dwight Powell", chinese: "å¾·æ€€ç‰¹Â·é²å¨å°”", team: "ç‹¬è¡Œä¾ ", position: "C" },
                { name: "Jaden Hardy", chinese: "æ°ç™»Â·å“ˆè¿ª", team: "ç‹¬è¡Œä¾ ", position: "SG" },
                { name: "Dereck Lively II", chinese: "å¾·é‡Œå…‹Â·è±å¼—åˆ©äºŒä¸–", team: "ç‹¬è¡Œä¾ ", position: "C" },
                { name: "Olivier-Maxence Prosper", chinese: "å¥¥åˆ©ç»´å°”-é©¬å…‹æ¡‘æ–¯Â·æ™®ç½—æ–¯ç€", team: "ç‹¬è¡Œä¾ ", position: "SF" },
                { name: "Dante Exum", chinese: "ä¸¹ç‰¹Â·åŸƒå…‹è¨å§†", team: "ç‹¬è¡Œä¾ ", position: "PG" },
                
                // å…¶ä»–çƒé˜Ÿçš„çƒå‘˜ - ç®€åŒ–ç‰ˆæœ¬
                { name: "LeBron James", chinese: "å‹’å¸ƒæœ—Â·è©¹å§†æ–¯", team: "æ¹–äºº", position: "SF" },
                { name: "Stephen Curry", chinese: "æ–¯è’‚èŠ¬Â·åº“é‡Œ", team: "å‹‡å£«", position: "PG" },
                { name: "Kevin Durant", chinese: "å‡¯æ–‡Â·æœå…°ç‰¹", team: "å¤ªé˜³", position: "SF" },
                { name: "Giannis Antetokounmpo", chinese: "æ‰¬å°¼æ–¯Â·å®‰ç‰¹æ‰˜æ˜†åš", team: "é›„é¹¿", position: "PF" },
                { name: "Jayson Tatum", chinese: "æ°æ£®Â·å¡”å›¾å§†", team: "å‡¯å°”ç‰¹äºº", position: "SF" },
                { name: "Joel Embiid", chinese: "ä¹”å°”Â·æ©æ¯”å¾·", team: "76äºº", position: "C" },
                { name: "Nikola Jokic", chinese: "å°¼å¤æ‹‰Â·çº¦åŸºå¥‡", team: "æ˜é‡‘", position: "C" },
                { name: "Devin Booker", chinese: "å¾·æ–‡Â·å¸ƒå…‹", team: "å¤ªé˜³", position: "SG" },
                { name: "Anthony Davis", chinese: "å®‰ä¸œå°¼Â·æˆ´ç»´æ–¯", team: "æ¹–äºº", position: "PF" },
                { name: "Kawhi Leonard", chinese: "ç§‘æ€€Â·ä¼¦çº³å¾·", team: "å¿«èˆ¹", position: "SF" },
                { name: "Paul George", chinese: "ä¿ç½—Â·ä¹”æ²»", team: "å¿«èˆ¹", position: "SF" },
                { name: "Damian Lillard", chinese: "è¾¾ç±³å®‰Â·åˆ©æ‹‰å¾·", team: "é›„é¹¿", position: "PG" },
                { name: "Jimmy Butler", chinese: "å‰ç±³Â·å·´ç‰¹å‹’", team: "çƒ­ç«", position: "SF" },
                { name: "Trae Young", chinese: "ç‰¹é›·Â·æ¨", team: "è€é¹°", position: "PG" },
                { name: "Zion Williamson", chinese: "é”¡å®‰Â·å¨å»‰å§†æ£®", team: "é¹ˆé¹•", position: "PF" },
                { name: "Ja Morant", chinese: "è´¾Â·è«å…°ç‰¹", team: "ç°ç†Š", position: "PG" },
                { name: "Karl-Anthony Towns", chinese: "å¡å°”-å®‰ä¸œå°¼Â·å”æ–¯", team: "æ£®æ—ç‹¼", position: "C" },
                { name: "Donovan Mitchell", chinese: "å¤šè¯ºä¸‡Â·ç±³åˆ‡å°”", team: "éª‘å£«", position: "SG" },
                { name: "Jaylen Brown", chinese: "æ°ä¼¦Â·å¸ƒæœ—", team: "å‡¯å°”ç‰¹äºº", position: "SG" },
                { name: "Shai Gilgeous-Alexander", chinese: "è°¢ä¼ŠÂ·å‰å°”æ°æ–¯-äºšå†å±±å¤§", team: "é›·éœ†", position: "PG" },
                { name: "Victor Wembanyama", chinese: "ç»´å…‹æ‰˜Â·æ–‡ç­äºšé©¬", team: "é©¬åˆº", position: "C" }
            ],
            
            classic: [
                { name: "Kobe Bryant", chinese: "ç§‘æ¯”Â·å¸ƒè±æ©ç‰¹", team: "æ¹–äºº", position: "SG" },
                { name: "Michael Jordan", chinese: "è¿ˆå…‹å°”Â·ä¹”ä¸¹", team: "å…¬ç‰›", position: "SG" },
                { name: "Shaquille O'Neal", chinese: "æ²™å¥å°”Â·å¥¥å°¼å°”", team: "æ¹–äºº", position: "C" },
                { name: "Tim Duncan", chinese: "è’‚å§†Â·é‚“è‚¯", team: "é©¬åˆº", position: "PF" },
                { name: "Allen Iverson", chinese: "é˜¿ä¼¦Â·è‰¾å¼—æ£®", team: "76äºº", position: "PG" },
                { name: "Yao Ming", chinese: "å§šæ˜", team: "ç«ç®­", position: "C" },
                { name: "Dirk Nowitzki", chinese: "å¾·å…‹Â·è¯ºç»´èŒ¨åŸº", team: "ç‹¬è¡Œä¾ ", position: "PF" },
                { name: "Magic Johnson", chinese: "é­”æœ¯å¸ˆçº¦ç¿°é€Š", team: "æ¹–äºº", position: "PG" },
                { name: "Larry Bird", chinese: "æ‹‰é‡ŒÂ·ä¼¯å¾·", team: "å‡¯å°”ç‰¹äºº", position: "SF" },
                { name: "Hakeem Olajuwon", chinese: "å“ˆåŸºå§†Â·å¥¥æ‹‰æœ±æ—º", team: "ç«ç®­", position: "C" },
                { name: "Scottie Pippen", chinese: "æ–¯ç§‘è’‚Â·çš®è“¬", team: "å…¬ç‰›", position: "SF" },
                { name: "Charles Barkley", chinese: "æŸ¥å°”æ–¯Â·å·´å…‹åˆ©", team: "å¤ªé˜³", position: "PF" },
                { name: "John Stockton", chinese: "çº¦ç¿°Â·æ–¯æ‰˜å…‹é¡¿", team: "çˆµå£«", position: "PG" },
                { name: "Karl Malone", chinese: "å¡å°”Â·é©¬é¾™", team: "çˆµå£«", position: "PF" },
                { name: "Clyde Drexler", chinese: "å…‹è±å¾·Â·å¾·é›·å…‹æ–¯å‹’", team: "å¼€æ‹“è€…", position: "SG" }
            ]
        };

        // çƒé˜Ÿåˆ—è¡¨
        const teams = ["æ¹–äºº", "å‹‡å£«", "å‡¯å°”ç‰¹äºº", "çƒ­ç«", "é›„é¹¿", "76äºº", "æ˜é‡‘", "å¤ªé˜³", "å¿«èˆ¹", "ç¯®ç½‘", "ç‹¬è¡Œä¾ "];

        // å·¥å…·å‡½æ•° - æ”¹è¿›çš„éšæœºæŠ½å–ç®—æ³•
        function getRandomPlayers(playerType, count) {
            const playerPool = nbaData[playerType] || nbaData.active;
            
            // æ£€æŸ¥çƒå‘˜æ± æ˜¯å¦ä¸ºç©º
            if (playerPool.length === 0) {
                console.error(`çƒå‘˜æ± ä¸ºç©º: ${playerType}`);
                return [];
            }
            
            // ç¡®ä¿ä¸ä¼šè¯·æ±‚è¶…è¿‡æ± ä¸­æ•°é‡çš„çƒå‘˜
            const actualCount = Math.min(count, playerPool.length);
            
            // ä½¿ç”¨Fisher-Yatesæ´—ç‰Œç®—æ³•è¿›è¡Œæ›´å‡åŒ€çš„éšæœºæŠ½å–
            const shuffled = [...playerPool];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            
            return shuffled.slice(0, actualCount);
        }

        function getRandomTeam() {
            return teams[Math.floor(Math.random() * teams.length)];
        }

        // ä¿å­˜ç©å®¶åå­—åˆ°æœ¬åœ°å­˜å‚¨
        function savePlayers() {
            const player1 = document.getElementById('player1').value.trim();
            const player2 = document.getElementById('player2').value.trim();
            const player3 = document.getElementById('player3').value.trim();
            const player4 = document.getElementById('player4').value.trim();
            
            if (!player1 || !player2 || !player3 || !player4) {
                alert('è¯·å¡«å†™æ‰€æœ‰ç©å®¶åç§°ï¼');
                return;
            }
            
            const players = [player1, player2, player3, player4];
            localStorage.setItem('nbaPlayers', JSON.stringify(players));
            alert('ç©å®¶åç§°å·²ä¿å­˜ï¼');
        }

        // åŠ è½½ç©å®¶åå­—ä»æœ¬åœ°å­˜å‚¨
        function loadPlayers() {
            const savedPlayers = localStorage.getItem('nbaPlayers');
            if (savedPlayers) {
                const players = JSON.parse(savedPlayers);
                document.getElementById('player1').value = players[0] || '';
                document.getElementById('player2').value = players[1] || '';
                document.getElementById('player3').value = players[2] || '';
                document.getElementById('player4').value = players[3] || '';
                alert('ç©å®¶åç§°å·²åŠ è½½ï¼');
            } else {
                alert('æ²¡æœ‰ä¿å­˜çš„ç©å®¶åç§°ï¼');
            }
        }

        // æ¸…ç©ºç©å®¶åå­—
        function clearPlayers() {
            document.getElementById('player1').value = '';
            document.getElementById('player2').value = '';
            document.getElementById('player3').value = '';
            document.getElementById('player4').value = '';
            localStorage.removeItem('nbaPlayers');
            alert('ç©å®¶åç§°å·²æ¸…ç©ºï¼');
        }

        // ç”Ÿæˆå¯¹å†³
        function generateMatchup() {
            const playerType = document.querySelector('input[name="playerType"]:checked').value;
            const teamMode = document.querySelector('input[name="teamMode"]:checked').value;
            const loading = document.getElementById('loading');
            const resultContainer = document.getElementById('resultContainer');
            const matchupResult = document.getElementById('matchupResult');
            const teamsResult = document.getElementById('teamsResult');
            const singlePlayerResult = document.getElementById('singlePlayerResult');
            
            // éªŒè¯ç©å®¶è¾“å…¥ï¼ˆå¦‚æœæ˜¯æ‰‹åŠ¨åˆ†é˜Ÿæ¨¡å¼ï¼‰
            if (teamMode === 'manual') {
                const player1 = document.getElementById('player1').value.trim();
                const player2 = document.getElementById('player2').value.trim();
                const player3 = document.getElementById('player3').value.trim();
                const player4 = document.getElementById('player4').value.trim();
                
                if (!player1 || !player2 || !player3 || !player4) {
                    alert('è¯·å¡«å†™æ‰€æœ‰ç©å®¶åç§°ï¼');
                    return;
                }
            }
            
            // æ˜¾ç¤ºåŠ è½½å’Œç»“æœå®¹å™¨
            resultContainer.style.display = 'block';
            loading.style.display = 'block';
            matchupResult.style.display = 'none';
            teamsResult.style.display = 'none';
            singlePlayerResult.style.display = 'none';
            
            // æ¨¡æ‹ŸåŠ è½½æ•ˆæœ
            setTimeout(() => {
                try {
                    const players = getRandomPlayers(playerType, 4);
                    
                    // æ£€æŸ¥æ˜¯å¦æˆåŠŸè·å–çƒå‘˜
                    if (players.length < 4) {
                        throw new Error(`æ— æ³•è·å–è¶³å¤Ÿçš„çƒå‘˜ã€‚åªè·å–äº† ${players.length} åçƒå‘˜ï¼Œéœ€è¦ 4 åã€‚`);
                    }
                    
                    // ç¡®ä¿DOMå…ƒç´ å­˜åœ¨
                    const team1PlayersDiv = document.getElementById('team1Players');
                    const team2PlayersDiv = document.getElementById('team2Players');
                    
                    if (!team1PlayersDiv || !team2PlayersDiv) {
                        throw new Error('æ‰¾ä¸åˆ°DOMå…ƒç´ ');
                    }
                    
                    // åˆ†é˜Ÿé€»è¾‘
                    let team1Players, team2Players;
                    let team1Names = "é˜Ÿä¼ä¸€", team2Names = "é˜Ÿä¼äºŒ";
                    
                    if (teamMode === 'manual') {
                        // æ‰‹åŠ¨åˆ†é˜Ÿæ¨¡å¼ - éšæœºåˆ†é…ç©å®¶åˆ°ä¸¤é˜Ÿ
                        const allPlayers = [
                            document.getElementById('player1').value.trim(),
                            document.getElementById('player2').value.trim(),
                            document.getElementById('player3').value.trim(),
                            document.getElementById('player4').value.trim()
                        ];
                        
                        // éšæœºæ‰“ä¹±ç©å®¶é¡ºåº
                        const shuffledPlayers = [...allPlayers].sort(() => Math.random() - 0.5);
                        
                        // å‰ä¸¤ä¸ªç©å®¶ä¸ºé˜Ÿä¼ä¸€ï¼Œåä¸¤ä¸ªä¸ºé˜Ÿä¼äºŒ
                        team1Names = `${shuffledPlayers[0]} & ${shuffledPlayers[1]}`;
                        team2Names = `${shuffledPlayers[2]} & ${shuffledPlayers[3]}`;
                        
                        // æ›´æ–°é˜Ÿä¼åç§°
                        document.getElementById('team1Name').textContent = team1Names;
                        document.getElementById('team2Name').textContent = team2Names;
                        
                        // åˆ†é…çƒå‘˜ç»™é˜Ÿä¼
                        team1Players = players.slice(0, 2);
                        team2Players = players.slice(2, 4);
                        
                        // ä¸ºæ¯ä¸ªçƒå‘˜åˆ†é…ç©å®¶
                        team1Players[0].assignedPlayer = shuffledPlayers[0];
                        team1Players[1].assignedPlayer = shuffledPlayers[1];
                        team2Players[0].assignedPlayer = shuffledPlayers[2];
                        team2Players[1].assignedPlayer = shuffledPlayers[3];
                    } else {
                        // è‡ªåŠ¨åˆ†é˜Ÿæ¨¡å¼
                        team1Players = players.slice(0, 2);
                        team2Players = players.slice(2, 4);
                        
                        // æ›´æ–°é˜Ÿä¼åç§°
                        document.getElementById('team1Name').textContent = "é˜Ÿä¼ä¸€";
                        document.getElementById('team2Name').textContent = "é˜Ÿä¼äºŒ";
                    }
                    
                    // æ›´æ–°é˜Ÿä¼1çš„çƒå‘˜
                    team1PlayersDiv.innerHTML = team1Players.map(player => {
                        let playerAssign = '';
                        if (player.assignedPlayer) {
                            playerAssign = `<div class="player-assign">ç©å®¶: ${player.assignedPlayer}</div>`;
                        }
                        return `
                            <div class="player-card">
                                <div class="player-name">${player.name}</div>
                                <div class="player-details">${player.chinese} â€¢ ${player.team} â€¢ ${player.position}</div>
                                ${playerAssign}
                            </div>
                        `;
                    }).join('');
                    
                    // æ›´æ–°é˜Ÿä¼2çš„çƒå‘˜
                    team2PlayersDiv.innerHTML = team2Players.map(player => {
                        let playerAssign = '';
                        if (player.assignedPlayer) {
                            playerAssign = `<div class="player-assign">ç©å®¶: ${player.assignedPlayer}</div>`;
                        }
                        return `
                            <div class="player-card">
                                <div class="player-name">${player.name}</div>
                                <div class="player-details">${player.chinese} â€¢ ${player.team} â€¢ ${player.position}</div>
                                ${playerAssign}
                            </div>
                        `;
                    }).join('');
                    
                    // æ˜¾ç¤ºç»“æœ
                    loading.style.display = 'none';
                    matchupResult.style.display = 'block';
                } catch (error) {
                    console.error('ç”Ÿæˆçƒå‘˜å¯¹å†³æ—¶å‡ºé”™:', error);
                    loading.style.display = 'none';
                    matchupResult.style.display = 'block';
                    document.getElementById('team1Players').innerHTML = '<div class="player-card">ç”Ÿæˆå¤±è´¥: ' + error.message + '</div>';
                    document.getElementById('team2Players').innerHTML = '<div class="player-card">è¯·åˆ·æ–°é¡µé¢é‡è¯•</div>';
                }
            }, 500);
        }

        // ç”Ÿæˆçƒé˜Ÿ - ä¿®å¤çƒé˜Ÿé‡å¤é—®é¢˜
        function generateTeams() {
            const playerType = document.querySelector('input[name="playerType"]:checked').value;
            const teamMode = document.querySelector('input[name="teamMode"]:checked').value;
            const loading = document.getElementById('loading');
            const resultContainer = document.getElementById('resultContainer');
            const matchupResult = document.getElementById('matchupResult');
            const teamsResult = document.getElementById('teamsResult');
            const singlePlayerResult = document.getElementById('singlePlayerResult');
            
            // éªŒè¯ç©å®¶è¾“å…¥ï¼ˆå¦‚æœæ˜¯æ‰‹åŠ¨åˆ†é˜Ÿæ¨¡å¼ï¼‰
            if (teamMode === 'manual') {
                const player1 = document.getElementById('player1').value.trim();
                const player2 = document.getElementById('player2').value.trim();
                const player3 = document.getElementById('player3').value.trim();
                const player4 = document.getElementById('player4').value.trim();
                
                if (!player1 || !player2 || !player3 || !player4) {
                    alert('è¯·å¡«å†™æ‰€æœ‰ç©å®¶åç§°ï¼');
                    return;
                }
            }
            
            // æ˜¾ç¤ºåŠ è½½å’Œç»“æœå®¹å™¨
            resultContainer.style.display = 'block';
            loading.style.display = 'block';
            matchupResult.style.display = 'none';
            teamsResult.style.display = 'none';
            singlePlayerResult.style.display = 'none';
            
            // æ¨¡æ‹ŸåŠ è½½æ•ˆæœ
            setTimeout(() => {
                let teamAName, teamBName;
                let teamAPlayers = "", teamBPlayers = "";
                let teamASubtitle, teamBSubtitle;
                
                if (teamMode === 'manual') {
                    // æ‰‹åŠ¨åˆ†é˜Ÿæ¨¡å¼ - éšæœºåˆ†é…ç©å®¶åˆ°ä¸¤é˜Ÿ
                    const allPlayers = [
                        document.getElementById('player1').value.trim(),
                        document.getElementById('player2').value.trim(),
                        document.getElementById('player3').value.trim(),
                        document.getElementById('player4').value.trim()
                    ];
                    
                    // éšæœºæ‰“ä¹±ç©å®¶é¡ºåº
                    const shuffledPlayers = [...allPlayers].sort(() => Math.random() - 0.5);
                    
                    // å‰ä¸¤ä¸ªç©å®¶ä¸ºé˜Ÿä¼Aï¼Œåä¸¤ä¸ªä¸ºé˜Ÿä¼B
                    const teamAPlayerNames = `${shuffledPlayers[0]} & ${shuffledPlayers[1]}`;
                    const teamBPlayerNames = `${shuffledPlayers[2]} & ${shuffledPlayers[3]}`;
                    
                    // ç”Ÿæˆéšæœºçƒé˜Ÿå - ä¿®å¤é‡å¤é—®é¢˜
                    teamAName = getRandomTeam();
                    // ç¡®ä¿é˜Ÿä¼Bçš„çƒé˜Ÿåç§°ä¸ä¸é˜Ÿä¼Aé‡å¤
                    do {
                        teamBName = getRandomTeam();
                    } while (teamBName === teamAName);
                    
                    // æ›´æ–°é˜Ÿä¼åç§°å’Œç©å®¶ä¿¡æ¯
                    teamASubtitle = `ç©å®¶åˆ†é˜Ÿ: ${teamAPlayerNames}`;
                    teamBSubtitle = `ç©å®¶åˆ†é˜Ÿ: ${teamBPlayerNames}`;
                    
                    // ç©å®¶åˆ†é˜Ÿæ¨¡å¼ä¸‹ä¸æ˜¾ç¤ºçƒå‘˜ï¼Œåªæ˜¾ç¤ºç©å®¶ä¿¡æ¯
                    teamAPlayers = `<div class="team-players">ç©å®¶: ${teamAPlayerNames}</div>`;
                    teamBPlayers = `<div class="team-players">ç©å®¶: ${teamBPlayerNames}</div>`;
                } else {
                    // è‡ªåŠ¨åˆ†é˜Ÿæ¨¡å¼
                    teamAName = getRandomTeam();
                    // ç¡®ä¿é˜Ÿä¼Bçš„çƒé˜Ÿåç§°ä¸ä¸é˜Ÿä¼Aé‡å¤
                    do {
                        teamBName = getRandomTeam();
                    } while (teamBName === teamAName);
                    
                    // æ›´æ–°é˜Ÿä¼åç§°å’Œç©å®¶ä¿¡æ¯
                    teamASubtitle = "éšæœºç”Ÿæˆçƒé˜Ÿ";
                    teamBSubtitle = "éšæœºç”Ÿæˆçƒé˜Ÿ";
                    
                    // è·å–5åçƒå‘˜ï¼ˆå®Œæ•´çƒé˜Ÿï¼‰
                    const players = getRandomPlayers(playerType, 5);
                    
                    // æ£€æŸ¥æ˜¯å¦æˆåŠŸè·å–çƒå‘˜
                    if (players.length < 5) {
                        teamAPlayers = `<div class="team-players">æ— æ³•è·å–è¶³å¤Ÿçš„çƒå‘˜</div>`;
                        teamBPlayers = `<div class="team-players">è¯·åˆ·æ–°é‡è¯•</div>`;
                    } else {
                        // åˆ†é…çƒå‘˜ç»™é˜Ÿä¼
                        const teamAPlayersList = players.slice(0, 3);
                        const teamBPlayersList = players.slice(3, 5);
                        
                        // åˆ›å»ºçƒå‘˜åˆ—è¡¨HTML
                        teamAPlayers = `
                            <div class="team-players-list">
                                ${teamAPlayersList.map(player => `
                                    <div class="team-player-item">
                                        <span>${player.name}</span>
                                        <span>${player.position}</span>
                                    </div>
                                `).join('')}
                            </div>
                        `;
                        
                        teamBPlayers = `
                            <div class="team-players-list">
                                ${teamBPlayersList.map(player => `
                                    <div class="team-player-item">
                                        <span>${player.name}</span>
                                        <span>${player.position}</span>
                                    </div>
                                `).join('')}
                            </div>
                        `;
                    }
                }
                
                // æ›´æ–°é˜Ÿä¼A
                document.getElementById('teamA').textContent = teamAName;
                document.getElementById('teamASubtitle').textContent = teamASubtitle;
                document.getElementById('teamAPlayers').innerHTML = teamAPlayers;
                
                // æ›´æ–°é˜Ÿä¼B
                document.getElementById('teamB').textContent = teamBName;
                document.getElementById('teamBSubtitle').textContent = teamBSubtitle;
                document.getElementById('teamBPlayers').innerHTML = teamBPlayers;
                
                // æ˜¾ç¤ºç»“æœ
                loading.style.display = 'none';
                teamsResult.style.display = 'block';
            }, 800);
        }

        // ç”Ÿæˆå•çƒå‘˜
        function generateSinglePlayer() {
            const playerType = document.querySelector('input[name="playerType"]:checked').value;
            const loading = document.getElementById('loading');
            const resultContainer = document.getElementById('resultContainer');
            const matchupResult = document.getElementById('matchupResult');
            const teamsResult = document.getElementById('teamsResult');
            const singlePlayerResult = document.getElementById('singlePlayerResult');
            
            // æ˜¾ç¤ºåŠ è½½å’Œç»“æœå®¹å™¨
            resultContainer.style.display = 'block';
            loading.style.display = 'block';
            matchupResult.style.display = 'none';
            teamsResult.style.display = 'none';
            singlePlayerResult.style.display = 'none';
            
            // æ¨¡æ‹ŸåŠ è½½æ•ˆæœ
            setTimeout(() => {
                // è·å–1åéšæœºçƒå‘˜
                const players = getRandomPlayers(playerType, 1);
                
                // æ£€æŸ¥æ˜¯å¦æˆåŠŸè·å–çƒå‘˜
                if (players.length === 0) {
                    document.getElementById('singlePlayerName').textContent = "æ— æ³•è·å–çƒå‘˜";
                    document.getElementById('singlePlayerDetails').textContent = "è¯·åˆ·æ–°é¡µé¢é‡è¯•";
                    document.getElementById('singlePlayerTeam').textContent = "";
                    document.getElementById('singlePlayerPosition').textContent = "";
                } else {
                    const player = players[0];
                    
                    // æ›´æ–°çƒå‘˜ä¿¡æ¯
                    document.getElementById('singlePlayerName').textContent = player.name;
                    document.getElementById('singlePlayerDetails').textContent = player.chinese;
                    document.getElementById('singlePlayerTeam').textContent = player.team;
                    document.getElementById('singlePlayerPosition').textContent = player.position;
                }
                
                // æ˜¾ç¤ºç»“æœ
                loading.style.display = 'none';
                singlePlayerResult.style.display = 'block';
            }, 600);
        }

        // åˆ†äº«åŠŸèƒ½
        function shareResult() {
            const text = `ğŸ€ çœ‹æˆ‘ç”Ÿæˆçš„NBAçƒå‘˜ï¼\nå¿«æ¥è¯•è¯•è¿™ä¸ªå…è´¹çš„NBAçƒå‘˜ç”Ÿæˆå™¨å§ï¼`;
            const url = window.location.href;
            
            if (navigator.share) {
                // å¦‚æœæµè§ˆå™¨æ”¯æŒåˆ†äº«API
                navigator.share({
                    title: 'NBAçƒå‘˜ç”Ÿæˆå™¨',
                    text: text,
                    url: url
                });
            } else {
                // å¦‚æœä¸æ”¯æŒï¼Œå¤åˆ¶é“¾æ¥åˆ°å‰ªè´´æ¿
                navigator.clipboard.writeText(url + '\n' + text).then(() => {
                    alert('é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼å¿«å»åˆ†äº«ç»™æœ‹å‹å§ï¼');
                });
            }
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // æ¨¡å¼åˆ‡æ¢
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    const mode = this.dataset.mode;
                    const generateBtn = document.getElementById('generateBtn');
                    
                    if (mode === 'matchup') {
                        generateBtn.textContent = 'ç”Ÿæˆå¯¹å†³';
                        generateBtn.onclick = generateMatchup;
                    } else if (mode === 'teams') {
                        generateBtn.textContent = 'ç”Ÿæˆçƒé˜Ÿ';
                        generateBtn.onclick = generateTeams;
                    } else {
                        generateBtn.textContent = 'æŠ½å–çƒå‘˜';
                        generateBtn.onclick = generateSinglePlayer;
                    }
                });
            });
            
            // åˆ†é˜Ÿæ¨¡å¼åˆ‡æ¢
            document.querySelectorAll('input[name="teamMode"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const playerInputs = document.getElementById('playerInputs');
                    if (this.value === 'manual') {
                        playerInputs.style.display = 'block';
                    } else {
                        playerInputs.style.display = 'none';
                    }
                });
            });
            
            // ç©å®¶ç®¡ç†æŒ‰é’®
            document.getElementById('savePlayers').addEventListener('click', savePlayers);
            document.getElementById('loadPlayers').addEventListener('click', loadPlayers);
            document.getElementById('clearPlayers').addEventListener('click', clearPlayers);
            
            // é»˜è®¤ç»‘å®šç”Ÿæˆå¯¹å†³
            document.getElementById('generateBtn').onclick = generateMatchup;
            
            // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨åŠ è½½ç©å®¶åç§°
            loadPlayers();
            
            // è°ƒè¯•ä¿¡æ¯ - æ˜¾ç¤ºçƒå‘˜æ± å¤§å°
            console.log(`ç°å½¹çƒå‘˜æ•°é‡: ${nbaData.active.length}`);
            console.log(`ä¼ å¥‡çƒå‘˜æ•°é‡: ${nbaData.classic.length}`);
        });
    </script>
</body>
</html>
